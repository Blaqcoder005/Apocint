<!doctype html>
<html lang="en"> 
 <head> 
  <meta charset="UTF-8"> 
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
  <title>Apostolic Chapel International | Habitation of Grace</title> 
  <link rel="stylesheet" href="{{ url_for('static', filename='frontend.css') }}">
  </head> 
 <body> <!-- Navigation --> 
  <header class="navbar">  
    <div class="container"> 
     <div class="logo"></div> <button class="menu-toggle" id="menuToggle">â˜°</button> 
     <ul class="nav-links" id="navLinks"> 
      <li><a href="/">Home</a></li> 
      <li><a href="/about">About</a></li> 
      <li><a href="/sermond">Sermons</a></li> 
      <li><a href="/event">Events</a></li> 
      <li><a href="/resources">Books</a></li>
      <li><a href="/contact">Contact</a></li> 
     </ul> 
    </div> 
  </header> <!-- Ministries Section --> 
  <section class="ministries">
   <div class="container"> 
    <h2>SERMONS</h2> 
    <div class="ministry-cards">

	<div class="search-bar">
	  <input type="text" id="searchInput" placeholder="Search sermons by title...">
	</div>
        <div class="container">

	  {% for sermon in sermon_files %}
	    <div class="sermon-item">
	      <div class="sermon-title">ðŸŽ§ {{ sermon.title }}</div>

	      <audio class="sermon-audio" controls>
	        <source src="{{ url_for('static', filename='uploads/' + sermon.file_name) }}" type="audio/mpeg">
	        Your browser does not support the audio element.
	      </audio>

	      <div class="sermon-meta">
	        <strong>Uploaded:</strong> {{ sermon.uploaded_at.strftime('%b %d, %Y') }}<br>
	        <a href="{{ url_for('static', filename='uploads/' + sermon.file_name) }}" class="sermon-download" download>â¬‡ Download Sermon</a>
	      </div>
	    </div>
	  {% else %}
	    <p>No sermons uploaded yet.</p>
	  {% endfor %}
         </div>
  </section> <!-- Footer --> 
  <footer>
   <div class="container"> 
    <p>Â© 2025 Apostolic Chapel International. All rights reserved.</p> 
   </div> 
  </div>
 </footer> 
 
<script type="text/javascript" id="dcoder_script">// Highlight active page
  const links = document.querySelectorAll('nav a');
  const currentPage = window.location.pathname;
  links.forEach(link => {
    if (link.getAttribute('href') === currentPage) {
      link.classList.add('active');
    }
  });
  
  // Smooth scroll for anchor links
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener("click", function (e) {
      e.preventDefault();
      document.querySelector(this.getAttribute("href")).scrollIntoView({
        behavior: "smooth"
      });
    });
  });

  // Navbar toggle and auto-close
  const menuToggle = document.getElementById("menuToggle");
  const navLinks = document.getElementById("navLinks");

  menuToggle.addEventListener("click", function () {
    navLinks.classList.toggle("show");
  });

  document.querySelectorAll("#navLinks a").forEach(link => {
    link.addEventListener("click", () => {
      navLinks.classList.remove("show");
    });
  });



  const searchInput = document.getElementById("searchInput");
  searchInput.addEventListener("input", function () {
    const filter = searchInput.value.toLowerCase();
    const items = document.querySelectorAll("#sermonList .sermon-item");

    items.forEach(item => {
      const title = item.querySelector(".sermon-title").textContent.toLowerCase();
      item.style.display = title.includes(filter) ? "" : "none";
    });
  });


  const audios = document.querySelectorAll(".sermon-audio");
  audios.forEach(audio => {
    audio.addEventListener("play", () => {
      audios.forEach(a => {
        a.closest(".audio-wrapper").classList.remove("audio-playing");
      });
      audio.closest(".audio-wrapper").classList.add("audio-playing");
    });

    audio.addEventListener("pause", () => {
      audio.closest(".audio-wrapper").classList.remove("audio-playing");
    });
  });
  </script>
 </body>
</html>
